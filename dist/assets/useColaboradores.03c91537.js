import{c8 as i,ca as b,cb as l,cc as s,V as n}from"./index.5404b0db.js";const d=i(),g=b("Colaboradores",{state:()=>({colaboradores:[],colaborador:{}}),getters:{getColaboradores:o=>o.colaboradores,getColaborador:o=>o.colaborador,getOnlyRutCol:o=>o.colaboradores.map(e=>e.rut_colaborador)},actions:{async getAllColaboradores(){const o=await d.getToken;if(o=="")return this.colaboradores;const{data:e}=await l.get("/colaboradores",{headers:{Authorization:`Bearer ${o}`}});console.log("getAllColaboradores ACTIONS: ",e),this.colaboradores=e},async getColaboradoresById(o){const e=d.getToken,{data:a}=await l.get(`/colaboradores/${o}`,{headers:{Authorization:`Bearer ${e}`}});console.log(a),this.colaboradores=a},async createColaboradores(o){const e=await d.getToken;await l.post("/colaboradores/add/",o,{headers:{Authorization:`Bearer ${e}`}}).then(a=>{s.create({message:`Colaborador ${a.data.rut_colaborador} creado exitosamente!`,type:"positive",actions:[{label:"Cerrar",color:"white"}]}),console.log(a)}).catch(a=>{s.create({message:a.response.data.errors[0].message,type:"negative",actions:[{label:"Cerrar",color:"white"}]}),console.log("Error",a.response.data.message)}),this.getAllColaboradores()},async updateColaboradores(o,e){const a=await d.getToken;console.log("updateColaboradores actions:",o,e),await l.put(`colaboradores/update/${o}`,e,{headers:{Authorization:`Bearer ${a}`}}).then(t=>{s.create({message:`Colaborador ${t.data.rut_cliente} actualizado exitosamente!`,type:"positive",actions:[{label:"Cerrar",color:"white"}]}),console.log(t)}).catch(t=>{s.create({message:t.response.data.errors[0].message,type:"negative",actions:[{label:"Cerrar",color:"white"}]}),console.log("Error",t.response.data.message)}),this.getAllColaboradores()},async deleteColaborador(o){const e=d.getToken;await l.delete(`colaboradores/delete/${o}`,{headers:{Authorization:`Bearer ${e}`}}).then(({data:a})=>{s.create({message:`Colaborador ${a} eliminado exitosamente!`,type:"negative",caption:"Cuidado al eliminar!",progress:!0,actions:[{label:"Cerrar",color:"white"}]}),this.colaboradores=this.colaboradores.filter(t=>t.rut_colaborador!==o),console.log("deleteColaborador ACTIONS: ",a)}).catch(a=>{console.log("deleteColaborador ACTIONS: ",a.response.data.message),s.create({message:a.response.data.message,type:"negative",actions:[{label:"Cerrar",color:"white"}]}),console.log("Error",a.response.data.message)}),this.getAllColaboradores()}}}),y=()=>{const o=g();return{getAllColaboradores:async()=>{await o.getAllColaboradores()},getColaboradorById:async r=>{await o.getColaboradoresById(r)},createColaborador:async r=>{console.log("createColaborador useColaborador: ",r),await o.createColaboradores(r)},updateColaborador:async(r,c)=>{console.log("updateColaborador useColaborador: ",r,c),await o.updateColaboradores(r,c)},deleteColaborador:async r=>{console.log("deleteColaborador useColaborador: ",r),await o.deleteColaborador(r)},getColabByRut:r=>o.getColaboradores.find(c=>c.rut_colaborador==r),getColaboradores:n(()=>o.getColaboradores),getColaborador:n(()=>o.getColaborador),getOnlyRutCol:n(()=>o.getOnlyRutCol)}};export{y as u};
