var u=Object.defineProperty,h=Object.defineProperties;var p=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;var i=(o,a,e)=>a in o?u(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,g=(o,a)=>{for(var e in a||(a={}))y.call(a,e)&&i(o,e,a[e]);if(b)for(var e of b(a))m.call(a,e)&&i(o,e,a[e]);return o},C=(o,a)=>h(o,p(a));import{c8 as A,cb as $,cc as l,V as n}from"./index.efe594f0.js";import{c as s}from"./Notifications.fda502fa.js";const d=A(),w=$("Colaboradores",{state:()=>({colaboradores:[],colaborador:{}}),getters:{getColaboradores:o=>o.colaboradores,getColaborador:o=>o.colaborador,getOnlyRutCol:o=>o.colaboradores.map(a=>a.rut_colaborador),getColaboradoresSelect:o=>o.colaboradores.map(a=>C(g({},a),{label:`${a.nombre_colaborador} ${a.appat_colaborador} ${a.apmat_colaborador}`,value:a.rut_colaborador}))},actions:{async getAllColaboradores(){const o=await d.getToken;if(o=="")return this.colaboradores;const{data:a}=await l.get("/colaboradores",{headers:{Authorization:`Bearer ${o}`}});console.log("getAllColaboradores ACTIONS: ",a),this.colaboradores=a},async getColaboradoresById(o){const a=d.getToken,{data:e}=await l.get(`/colaboradores/${o}`,{headers:{Authorization:`Bearer ${a}`}});console.log(e),this.colaboradores=e},async createColaboradores(o){const a=await d.getToken;await l.post("/colaboradores/add/",o,{headers:{Authorization:`Bearer ${a}`}}).then(e=>{s(`Colaborador ${e.data.rut_colaborador} creado exitosamente!`,"positive"),console.log(e)}).catch(e=>{s(e.response.data.errors[0].message,"negative"),console.log("Error",e.response.data.message)}),this.getAllColaboradores()},async updateColaboradores(o,a){const e=await d.getToken;console.log("updateColaboradores actions:",o,a),await l.patch(`colaboradores/${o}`,a,{headers:{Authorization:`Bearer ${e}`}}).then(t=>{s(`Colaborador ${t.data.rut_cliente} actualizado exitosamente!`,"positive"),console.log(t)}).catch(t=>{s(t.response.data.errors[0].message,"negative"),console.log("Error",t.response.data.message)}),this.getAllColaboradores()},async deleteColaborador(o){const a=d.getToken;if(o==10111222){s("El usuario SuperAdmin no se puede eliminar!!","regative");return}await l.delete(`colaboradores/delete/${o}`,{headers:{Authorization:`Bearer ${a}`}}).then(({data:e})=>{s(`Colaborador ${e.rut_colaborador} eliminado exitosamente!`,"negative"),this.colaboradores=this.colaboradores.filter(t=>t.rut_colaborador!==o),console.log("deleteColaborador ACTIONS: ",e)}).catch(e=>{console.log("deleteColaborador ACTIONS: ",e.response.data.message),s(e.response.data.message,"negative"),console.log("Error",e.response.data.message)}),this.getAllColaboradores()}}}),I=()=>{const o=w();return{getAllColaboradores:async()=>{await o.getAllColaboradores()},getColaboradorById:async r=>{await o.getColaboradoresById(r)},createColaborador:async r=>{console.log("createColaborador useColaborador: ",r),await o.createColaboradores(r)},updateColaborador:async(r,c)=>{console.log("updateColaborador useColaborador: ",r,c),await o.updateColaboradores(r,c)},deleteColaborador:async r=>{console.log("deleteColaborador useColaborador: ",r),await o.deleteColaborador(r)},getColabByRut:r=>o.getColaboradores.find(c=>c.rut_colaborador==r),getColaboradores:n(()=>o.getColaboradores),getColaborador:n(()=>o.getColaborador),getOnlyRutCol:n(()=>o.getOnlyRutCol),getColaboradoresSelect:n(()=>o.getColaboradoresSelect)}};export{I as u};
