import{bD as m,V as y,ae as s,bO as h,ab as S,n as b,cM as k,cB as Q,an as P,bS as _,bs as x,cT as D,cU as T,c7 as H}from"./index.b87efa9c.js";import{f as K}from"./QTable.f511fa1b.js";function i(e,o=new WeakMap){if(Object(e)!==e)return e;if(o.has(e))return o.get(e);const t=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const n=e.valueOf();if(Object(n)!==n){const l=new e.constructor(n);return o.set(e,l),l}}return o.set(e,t),e instanceof Set?e.forEach(n=>{t.add(i(n,o))}):e instanceof Map&&e.forEach((n,l)=>{t.set(l,i(n,o))}),Object.assign(t,...Object.keys(e).map(n=>({[n]:i(e[n],o)})))}var W=m({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:o}){const t=S(),n=y(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return s("td",{class:n.value},h(o.default));const l=t.vnode.key,r=(e.props.colsMap!==void 0?e.props.colsMap[l]:null)||e.props.col;if(r===void 0)return;const{row:a}=e.props;return s("td",{class:n.value+r.__tdClass(a),style:r.__tdStyle(a)},h(o.default))}}}),I=m({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","before-show","show","before-hide","hide"],setup(e,{slots:o,emit:t}){const{proxy:n}=S(),{$q:l}=n,r=b(null),a=b(""),u=b("");let v=!1;const C=y(()=>{const c={initialValue:a.value,validate:e.validate,set:d,cancel:f,updatePosition:w};return k(c,"value",()=>u.value,V=>{u.value=V}),c});function d(){e.validate(u.value)!==!1&&(p()===!0&&(t("save",u.value,a.value),t("update:modelValue",u.value)),g())}function f(){p()===!0&&t("cancel",u.value,a.value),g()}function w(){P(()=>{r.value.updatePosition()})}function p(){return Q(u.value,a.value)===!1}function g(){v=!0,r.value.hide()}function E(){v=!1,a.value=i(e.modelValue),u.value=i(e.modelValue),t("before-show")}function M(){t("show")}function B(){v===!1&&p()===!0&&(e.autoSave===!0&&e.validate(u.value)===!0?(t("save",u.value,a.value),t("update:modelValue",u.value)):t("cancel",u.value,a.value)),t("before-hide")}function O(){t("hide")}Object.assign(n,{set:d,cancel:f,show(c){r.value!==null&&r.value.show(c)},hide(c){r.value!==null&&r.value.hide(c)},updatePosition:w});function j(){const c=o.default!==void 0?[].concat(o.default(C.value)):[];return e.title&&c.unshift(s("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&c.push(s("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[s(_,{flat:!0,color:e.color,label:e.labelCancel||l.lang.label.cancel,onClick:f}),s(_,{flat:!0,color:e.color,label:e.labelSet||l.lang.label.set,onClick:d})])),c}return()=>{if(e.disable!==!0)return s(K,{ref:r,class:"q-popup-edit",cover:e.cover,onBeforeShow:E,onShow:M,onBeforeHide:B,onHide:O,onEscapeKey:f},j)}}}),N=m({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:o}){const t=y(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>s("tr",{class:t.value},h(o.default))}});function q(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}var U=x({name:"close-popup",beforeMount(e,{value:o}){const t={depth:q(o),handler(n){t.depth!==0&&setTimeout(()=>{const l=D(e);l!==void 0&&T(l,n,t.depth)})},handlerKey(n){H(n,13)===!0&&t.handler(n)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:o,oldValue:t}){o!==t&&(e.__qclosepopup.depth=q(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});export{U as C,N as Q,W as a,I as b};
