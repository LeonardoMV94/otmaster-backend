import{a5 as x,ca as B,n as u,ap as P,ao as j,aA as q,Y as K,a4 as o,b3 as a,cj as _,z as i,j as b,ck as M,cl as O,cm as z,Z as F,G as c,cn as G,b5 as w,bS as d,co as v,bR as g,a3 as V,bq as L,br as Y}from"./index.6afc27b2.js";import{Q as Z,e as H,f,g as J,i as W,C as y}from"./ClosePopup.93d4e85d.js";import{c as X}from"./Notifications.3fd28b16.js";import{u as $}from"./useAuth.7d03f9b7.js";import{u as ee}from"./useRepuestos.071aa7d7.js";import"./QItem.a3d8980f.js";const oe={class:"q-pa-md"},ae={class:"q-ml-sm"},de={__name:"TableEditRepuestos",setup(te){const C=x(()=>B(()=>import("./FormRepuesto.7b2f2b2e.js"),["assets/FormRepuesto.7b2f2b2e.js","assets/FormRepuesto.d7ead791.css","assets/index.6afc27b2.js","assets/index.d6902eec.css","assets/QForm.987b0ae1.js","assets/useRepuestos.071aa7d7.js","assets/Notifications.3fd28b16.js"])),{isAdmin:Q}=$(),{getAllRepuestos:k,getRepuestos:A,updateRepuesto:R,deleteRepuesto:I}=ee();let r=u(!1),n=u(!1),m=u(null);const p=u(""),h=()=>{r.value=!r.value},D=s=>{m.value=s,n.value=!n.value},E=[{name:"id_repuesto",label:"ID repuesto",align:"center",field:"id_repuesto",sortable:!0},{name:"repuesto",align:"center",label:"Nombre del repuesto",field:"repuesto",sortable:!0},{name:"acciones",align:"center",label:"Acciones",field:"acciones",sortable:!0}],S=async(s,t)=>{const e={repuesto:t};console.log("editarItemNombreRepuesto",s,e),await R(s,e)},U=async s=>{Q?(console.log("delete permitido",s),await I(s)):(console.log("no hay permisos"),X("No tiene permisos de Administrador para eliminar","negative"))},N=async()=>{await k()};return P(async()=>{await N()}),j(async()=>{await N()}),(s,t)=>(q(),K("div",oe,[o(W,{title:"Administraci\xF3n de Repuestos",rows:i(A),columns:E,filter:p.value,"row-key":"name","binary-state-sort":""},{top:a(()=>[o(_,{modelValue:i(r),"onUpdate:modelValue":t[0]||(t[0]=e=>b(r)?r.value=e:r=e)},{default:a(()=>[o(i(C))]),_:1},8,["modelValue"]),o(_,{modelValue:i(n),"onUpdate:modelValue":t[2]||(t[2]=e=>b(n)?n.value=e:n=e),persistent:""},{default:a(()=>[o(M,{class:""},{default:a(()=>[o(O,{class:"row items-center"},{default:a(()=>[o(z,{icon:"warning",color:"warning","text-color":"white"}),F("span",ae,"\xBFEst\xE1s seguro de eliminar el repuesto con ID "+c(i(m))+" ?",1)]),_:1}),o(G,{align:"right"},{default:a(()=>[w(o(d,{flat:"",label:"Cancelar",color:"primary"},null,512),[[y]]),w(o(d,{flat:"",label:"Confirmar",color:"negative",onClick:t[1]||(t[1]=e=>U(i(m)))},null,512),[[y]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(d,{color:"primary",label:"A\xF1adir nuevo repuesto",icon:"add",onClick:h}),o(Z),o(v,{modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=e=>p.value=e),outlined:"",dense:"",debounce:"300",color:"primary"},{append:a(()=>[o(g,{name:"search"})]),_:1},8,["modelValue"])]),body:a(e=>[o(H,{props:e},{default:a(()=>[o(f,{key:"id_repuesto",props:e},{default:a(()=>[V(c(e.row.id_repuesto),1)]),_:2},1032,["props"]),o(f,{key:"repuesto",props:e},{default:a(()=>[V(c(e.row.repuesto)+" ",1),o(J,{modelValue:e.row.repuesto,"onUpdate:modelValue":l=>e.row.repuesto=l,title:"Editar nombre de repuesto",buttons:"",persistent:"",onSave:l=>S(e.row.id_repuesto,l)},{default:a(l=>[o(v,{modelValue:l.value,"onUpdate:modelValue":T=>l.value=T,autofocus:"",counter:"",clearable:"",mask:"NNNNNNNNNNNNNNNNNNNNNN","unmasked-value":"",onKeyup:t[4]||(t[4]=L(Y(()=>{},["stop"]),["enter"]))},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),o(f,{key:"acciones",props:e},{default:a(()=>[o(d,{push:"",round:"",color:"red",onClick:l=>D(e.row.id_repuesto)},{default:a(()=>[o(g,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]))}};export{de as default};
