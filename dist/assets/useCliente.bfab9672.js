import{c8 as g,cH as C,cI as i,cJ as l,V as r}from"./index.08d974d9.js";const o=g(),d=C("clientes",{state:()=>({clientes:[],cliente:{}}),getters:{getClientes:e=>e.clientes,getOnlyRuts:e=>e.clientes.map(n=>n.rut_cliente)},actions:{async getAllClientes(){const e=o.getToken;if(e=="")return this.clientes;const{data:n}=await i.get("/clientes",{headers:{Authorization:`Bearer ${e}`}});console.log("getAllClientes ACTIONS: ",n),this.clientes=n},async getClienteById(e){const n=o.getToken,{data:t}=await i.get(`/clientes/${e}`,{headers:{Authorization:`Bearer ${n}`}});console.log(t),this.cliente=t},async createCliente(e){const n=o.getToken;await i.post("/clientes/add/",e,{headers:{Authorization:`Bearer ${n}`}}).then(t=>{l.create({message:`Cliente ${t.data.rut_cliente} creado exitosamente!`,type:"positive",actions:[{label:"Cerrar",color:"white"}]}),console.log(t)}).catch(t=>{l.create({message:t.response.data.errors[0].message,type:"negative",actions:[{label:"Cerrar",color:"white"}]}),console.log("Error",t.response.data.message)}),this.getAllClientes()},async updateCliente(e,n){const t=o.getToken;console.log("updateCliente actions:",e,n),await i.put(`clientes/update/${e}`,n,{headers:{Authorization:`Bearer ${t}`}}).then(a=>{l.create({message:`Cliente ${a.data.rut_cliente} actualizado exitosamente!`,type:"positive",actions:[{label:"Cerrar",color:"white"}]}),console.log(a)}).catch(a=>{l.create({message:a.response.data.errors[0].message,type:"negative",actions:[{label:"Cerrar",color:"white"}]}),console.log("Error",a.response.data.message)}),this.getAllClientes()},async deleteCliente(e){const n=o.getToken;await i.delete(`clientes/delete/${e}`,{headers:{Authorization:`Bearer ${n}`}}).then(({data:t})=>{l.create({message:`Cliente ${t} eliminado exitosamente!`,type:"negative",caption:"Cuidado al eliminar!",progress:!0,actions:[{label:"Cerrar",color:"white"}]}),this.clientes=this.clientes.filter(a=>a.rut_cliente!==e),console.log("deleteCliente ACTIONS: ",t)}).catch(t=>{console.log("deleteCliente ACTIONS: ",t.response.data.message),l.create({message:t.response.data.message,type:"negative",actions:[{label:"Cerrar",color:"white"}]}),console.log("Error",t.response.data.message)}),this.getAllClientes()}}}),m=()=>{const e=d();return{getAllClientes:async()=>{await e.getAllClientes()},getClienteById:async s=>{await e.getClienteById(s)},createCliente:async s=>{console.log("createCliente useCliente: ",s),await e.createCliente(s)},updateCliente:async(s,c)=>{console.log("updateCliente useCliente: ",s,c),await e.updateCliente(s,c)},deleteCliente:async s=>{console.log("deleteCliente useCliente: ",s),await e.deleteCliente(s)},getClienteByRut:s=>e.getClientes.find(c=>c.rut_cliente==s),getClientes:r(()=>e.getClientes),getOnlyRuts:r(()=>e.getOnlyRuts)}};export{m as u};
