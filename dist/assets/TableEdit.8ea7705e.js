var Le=Object.defineProperty,Fe=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var Ge=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var ve=(e,o,t)=>o in e?Le(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,z=(e,o)=>{for(var t in o||(o={}))Ge.call(o,t)&&ve(e,t,o[t]);if(ge)for(var t of ge(o))Je.call(o,t)&&ve(e,t,o[t]);return e},Y=(e,o)=>Fe(e,We(o));import{bD as W,V as m,ae as $,bO as G,ab as se,bE as Xe,cf as Ye,bG as Ze,n as w,cg as et,bI as tt,ch as ot,bK as at,ci as st,a_ as pe,aq as me,bB as be,bw as fe,bX as lt,b8 as it,bC as nt,cE as rt,ct,an as dt,bS as P,b$ as ut,bs as gt,cO as vt,cP as pt,c7 as mt,c8 as le,cH as ie,cI as y,cJ as A,cK as bt,ap as Ve,ao as Be,aA as $e,Y as xe,a4 as l,b3 as r,Z as V,z as k,bR as L,cL as K,cM as Oe,aD as ft,aB as ht,a3 as T,cu as he,j as ye,cQ as yt,cR as kt,G as h,cS as wt,b5 as ke,bq as Z}from"./index.08d974d9.js";import{Q as _t}from"./QSpace.0a5fb3f9.js";import{u as Ct,v as we,c as Tt,p as _e,d as At,e as Dt,r as Ce,s as St,f as Vt,g as Bt,b as ee,a as $t}from"./QTable.392f8c57.js";import{c as Te,b as te,Q as oe}from"./QItem.79500a3d.js";import{Q as xt}from"./QForm.2c983283.js";import{u as Ie}from"./useCliente.bfab9672.js";import{u as Ot}from"./useAuth.ac418cf5.js";function F(e,o=new WeakMap){if(Object(e)!==e)return e;if(o.has(e))return o.get(e);const t=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const s=e.valueOf();if(Object(s)!==s){const c=new e.constructor(s);return o.set(e,c),c}}return o.set(e,t),e instanceof Set?e.forEach(s=>{t.add(F(s,o))}):e instanceof Map&&e.forEach((s,c)=>{t.set(c,F(s,o))}),Object.assign(t,...Object.keys(e).map(s=>({[s]:F(e[s],o)})))}var E=W({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:o}){const t=se(),s=m(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return $("td",{class:s.value},G(o.default));const c=t.vnode.key,d=(e.props.colsMap!==void 0?e.props.colsMap[c]:null)||e.props.col;if(d===void 0)return;const{row:n}=e.props;return $("td",{class:s.value+d.__tdClass(n),style:d.__tdStyle(n)},G(o.default))}}}),Ae=W({name:"QTooltip",inheritAttrs:!1,props:Y(z(z(z({},Ct),Xe),Ye),{maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:we},self:{type:String,default:"top middle",validator:we},offset:{type:Array,default:()=>[14,14],validator:Tt},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}}),emits:[...Ze],setup(e,{slots:o,emit:t,attrs:s}){let c,d;const n=se(),{proxy:{$q:i}}=n,u=w(null),b=w(!1),_=m(()=>_e(e.anchor,i.lang.rtl)),D=m(()=>_e(e.self,i.lang.rtl)),x=m(()=>e.persistent!==!0),{registerTick:B,removeTick:I}=et(),{registerTimeout:S,removeTimeout:O}=tt(),{transition:q,transitionStyle:C}=ot(e,b),{localScrollTarget:g,changeScrollEvent:a,unconfigureScrollTarget:v}=At(e,de),{anchorEl:f,canShow:Re,anchorEvents:N}=Dt({showing:b,configureAnchorEl:je}),{show:Qe,hide:J}=at({showing:b,canShow:Re,handleShow:Ne,handleHide:Ue,hideOnRouteChange:x,processOnMount:!0});Object.assign(N,{delayShow:ze,delayHide:Me});const{showPortal:ne,hidePortal:re,renderPortal:Pe}=st(n,u,Ke);if(i.platform.is.mobile===!0){const p={anchorEl:f,innerRef:u,onClickOutside(R){return J(R),R.target.classList.contains("q-dialog__backdrop")&&nt(R),!0}},X=m(()=>e.modelValue===null&&e.persistent!==!0&&b.value===!0);pe(X,R=>{(R===!0?Vt:Ce)(p)}),me(()=>{Ce(p)})}function Ne(p){I(),O(),ne(),B(()=>{d=new MutationObserver(()=>U()),d.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),U(),de()}),c===void 0&&(c=pe(()=>i.screen.width+"|"+i.screen.height+"|"+e.self+"|"+e.anchor+"|"+i.lang.rtl,U)),S(()=>{ne(!0),t("show",p)},e.transitionDuration)}function Ue(p){I(),O(),re(),ce(),S(()=>{re(!0),t("hide",p)},e.transitionDuration)}function ce(){d!==void 0&&(d.disconnect(),d=void 0),c!==void 0&&(c(),c=void 0),v(),be(N,"tooltipTemp")}function U(){const p=u.value;f.value===null||!p||St({el:p,offset:e.offset,anchorEl:f.value,anchorOrigin:_.value,selfOrigin:D.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ze(p){if(i.platform.is.mobile===!0){Te(),document.body.classList.add("non-selectable");const X=f.value,R=["touchmove","touchcancel","touchend","click"].map(ue=>[X,ue,"delayHide","passiveCapture"]);fe(N,"tooltipTemp",R)}S(()=>{Qe(p)},e.delay)}function Me(p){O(),i.platform.is.mobile===!0&&(be(N,"tooltipTemp"),Te(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),S(()=>{J(p)},e.hideDelay)}function je(){if(e.noParentEvent===!0||f.value===null)return;const p=i.platform.is.mobile===!0?[[f.value,"touchstart","delayShow","passive"]]:[[f.value,"mouseenter","delayShow","passive"],[f.value,"mouseleave","delayHide","passive"]];fe(N,"anchor",p)}function de(){if(f.value!==null||e.scrollTarget!==void 0){g.value=lt(f.value,e.scrollTarget);const p=e.noParentEvent===!0?U:J;a(g.value,p)}}function He(){return b.value===!0?$("div",Y(z({},s),{ref:u,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",s.class],style:[s.style,C.value],role:"complementary"}),G(o.default)):null}function Ke(){return $(it,{name:q.value,appear:!0},He)}return me(ce),Object.assign(n.proxy,{updatePosition:U}),Pe}}),ae=W({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","before-show","show","before-hide","hide"],setup(e,{slots:o,emit:t}){const{proxy:s}=se(),{$q:c}=s,d=w(null),n=w(""),i=w("");let u=!1;const b=m(()=>{const a={initialValue:n.value,validate:e.validate,set:_,cancel:D,updatePosition:x};return rt(a,"value",()=>i.value,v=>{i.value=v}),a});function _(){e.validate(i.value)!==!1&&(B()===!0&&(t("save",i.value,n.value),t("update:modelValue",i.value)),I())}function D(){B()===!0&&t("cancel",i.value,n.value),I()}function x(){dt(()=>{d.value.updatePosition()})}function B(){return ct(i.value,n.value)===!1}function I(){u=!0,d.value.hide()}function S(){u=!1,n.value=F(e.modelValue),i.value=F(e.modelValue),t("before-show")}function O(){t("show")}function q(){u===!1&&B()===!0&&(e.autoSave===!0&&e.validate(i.value)===!0?(t("save",i.value,n.value),t("update:modelValue",i.value)):t("cancel",i.value,n.value)),t("before-hide")}function C(){t("hide")}Object.assign(s,{set:_,cancel:D,show(a){d.value!==null&&d.value.show(a)},hide(a){d.value!==null&&d.value.hide(a)},updatePosition:x});function g(){const a=o.default!==void 0?[].concat(o.default(b.value)):[];return e.title&&a.unshift($("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&a.push($("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[$(P,{flat:!0,color:e.color,label:e.labelCancel||c.lang.label.cancel,onClick:D}),$(P,{flat:!0,color:e.color,label:e.labelSet||c.lang.label.set,onClick:_})])),a}return()=>{if(e.disable!==!0)return $(Bt,{ref:d,class:"q-popup-edit",cover:e.cover,onBeforeShow:S,onShow:O,onBeforeHide:q,onHide:C,onEscapeKey:D},g)}}});const It=["top","middle","bottom"];var Et=W({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>It.includes(e)}},setup(e,{slots:o}){const t=m(()=>e.align!==void 0?{verticalAlign:e.align}:null),s=m(()=>{const c=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(c!==void 0?` text-${c}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>$("div",{class:s.value,style:t.value,role:"alert","aria-label":e.label},ut(o.default,e.label!==void 0?[e.label]:[]))}}),qt=W({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:o}){const t=m(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>$("tr",{class:t.value},G(o.default))}});function De(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}var Se=gt({name:"close-popup",beforeMount(e,{value:o}){const t={depth:De(o),handler(s){t.depth!==0&&setTimeout(()=>{const c=vt(e);c!==void 0&&pt(c,s,t.depth)})},handlerKey(s){mt(s,13)===!0&&t.handler(s)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:o,oldValue:t}){o!==t&&(e.__qclosepopup.depth=De(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});const M=le(),Rt=ie("Colaboradores",{state:()=>({colaboradores:[],colaborador:{}}),getters:{getColaboradores:e=>e.colaboradores,getColaborador:e=>e.colaborador,getOnlyRutCol:e=>e.colaboradores.map(o=>o.rut_colaborador)},actions:{async getAllColaboradores(){const e=await M.getToken;if(e=="")return this.colaboradores;const{data:o}=await y.get("/colaboradores",{headers:{Authorization:`Bearer ${e}`}});console.log("getAllColaboradores ACTIONS: ",o),this.colaboradores=o},async getColaboradoresById(e){const o=M.getToken,{data:t}=await y.get(`/colaboradores/${e}`,{headers:{Authorization:`Bearer ${o}`}});console.log(t),this.colaboradores=t},async createColaboradores(e){const o=await M.getToken;await y.post("/colaboradores/add/",e,{headers:{Authorization:`Bearer ${o}`}}).then(t=>{A.create({message:`Colaborador ${t.data.rut_colaborador} creado exitosamente!`,type:"positive",actions:[{label:"Cerrar",color:"white"}]}),console.log(t)}).catch(t=>{A.create({message:t.response.data.errors[0].message,type:"negative",actions:[{label:"Cerrar",color:"white"}]}),console.log("Error",t.response.data.message)}),this.getAllColaboradores()},async updateColaboradores(e,o){const t=await M.getToken;console.log("updateColaboradores actions:",e,o),await y.put(`colaboradores/update/${e}`,o,{headers:{Authorization:`Bearer ${t}`}}).then(s=>{A.create({message:`Colaborador ${s.data.rut_cliente} actualizado exitosamente!`,type:"positive",actions:[{label:"Cerrar",color:"white"}]}),console.log(s)}).catch(s=>{A.create({message:s.response.data.errors[0].message,type:"negative",actions:[{label:"Cerrar",color:"white"}]}),console.log("Error",s.response.data.message)}),this.getAllColaboradores()},async deleteColaborador(e){const o=M.getToken;await y.delete(`colaboradores/delete/${e}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:t})=>{A.create({message:`Colaborador ${t} eliminado exitosamente!`,type:"negative",caption:"Cuidado al eliminar!",progress:!0,actions:[{label:"Cerrar",color:"white"}]}),this.colaboradores=this.colaboradores.filter(s=>s.rut_colaborador!==e),console.log("deleteColaborador ACTIONS: ",t)}).catch(t=>{console.log("deleteColaborador ACTIONS: ",t.response.data.message),A.create({message:t.response.data.message,type:"negative",actions:[{label:"Cerrar",color:"white"}]}),console.log("Error",t.response.data.message)}),this.getAllColaboradores()}}}),Ee=()=>{const e=Rt();return{getAllColaboradores:async()=>{await e.getAllColaboradores()},getColaboradorById:async i=>{await e.getColaboradorById(i)},createColaborador:async i=>{console.log("createColaborador useColaborador: ",i),await e.createColaborador(i)},updateColaborador:async(i,u)=>{console.log("updateColaborador useColaborador: ",i,u),await e.updateColaborador(i,u)},deleteColaborador:async i=>{console.log("deleteColaborador useColaborador: ",i),await e.deleteColaborador(i)},getColabByRut:i=>e.getColaboradores.find(u=>u.rut_colaborador==i),getColaboradores:m(()=>e.getColaboradores),getColaborador:m(()=>e.getColaborador),getOnlyRutCol:m(()=>e.getOnlyRutCol)}},Q=(e,o)=>{A.create({message:`${e}`,type:o,actions:[{label:"Cerrar",color:"white"}]})},j=le(),Qt=ie("Dispositivos",{state:()=>({dispositivos:[],dispositivo:{}}),getters:{getDispositivos:e=>e.dispositivos,getDispositivo:e=>e.dispositivo,getOnlyIdDispositivos:e=>e.dispositivos.map(o=>o.id_dispositivo)},actions:{async getAllDispositivos(){const e=await j.getToken;if(e=="")return this.dispositivos;const{data:o}=await y.get("/dispositivos/",{headers:{Authorization:`Bearer ${e}`}});console.log("getAllDispositivos ACTIONS: ",o),this.dispositivos=o},async getTDById(e){const o=await j.getToken,{data:t}=await y.get(`/dispositivos/${e}`,{headers:{Authorization:`Bearer ${o}`}});console.log(t),this.dispositivo=t},async createDispositivo(e){const o=await j.getToken;await y.post("/dispositivos/add/",e,{headers:{Authorization:`Bearer ${o}`}}).then(t=>{Q(`Dispositivo ${t.data.id_dispositivo} creado exitosamente!`,"positive"),console.log(t)}).catch(t=>{Q(t.response.data.errors[0].message,"negative"),console.log("Error",t.response.data.message)}),this.getAllDispositivos()},async updateDispositivo(e,o){const t=await j.getToken;console.log("updateDispositivo actions:",e,o),await y.put(`dispositivos/update/${e}`,o,{headers:{Authorization:`Bearer ${t}`}}).then(s=>{Q(`Tipo Dispositivo ${s.data.id_rol} actualizado exitosamente!`,"positive"),console.log(s)}).catch(s=>{Q(s.response.data.errors[0].message,"negative"),console.log("Error",s.response.data.message)}),this.getAllDispositivos()},async deleteDispositivo(e){const o=await j.getToken;await y.delete(`dispositivos/delete/${e}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:t})=>{Q(`Tipo Dispositivo ${t} eliminado exitosamente!`,"positive"),this.roles=this.roles.filter(s=>s.id_dispositivo!==e),console.log("deleteDispositivo ACTIONS: ",t)}).catch(t=>{console.log("deleteDispositivo ACTIONS: ",t.response.data.message),Q(t.response.data.message,"negative"),console.log("Error",t.response.data.message)}),this.getAllDispositivos()}}}),Pt=()=>{const e=Qt();return{getAllDispositivos:async()=>{await e.getAllDispositivos()},getDispositivoById:async n=>{await e.getTDById(n)},createDispositivo:async n=>{console.log("createDispositivo ",n),await e.createDispositivo(n)},updateDispositivo:async(n,i)=>{console.log("updateDispositivo",n,i),await e.updateDispositivo(n,i)},deleteDispositivo:async n=>{console.log("deleteDispositivo useDispositivo: ",n),await e.deleteDispositivo(n)},getDispositivos:m(()=>e.getDispositivos),getDispositivo:m(()=>e.getDispositivo),getOnlyIdDispositivos:m(()=>e.getOnlyIdDispositivos)}},H=le(),Nt=ie("tickets",{state:()=>({tickets:[],ticket:{}}),getters:{getTickets:e=>e.tickets,getTicket:e=>e.ticket},actions:{async getAllTickets(){const e=H.getToken;if(e=="")return this.tickets;const{data:o}=await y.get("/tickets",{headers:{Authorization:`Bearer ${e}`}});console.log("getAllTickets ACTIONS: ",o),this.tickets=o},async getTicketById(e){const o=H.getToken,{data:t}=await y.get(`/tickets/${e}`,{headers:{Authorization:`Bearer ${o}`}});console.log(t),this.cliente=t},async createTicket(e){const o=await H.getToken;await y.post("/tickets/add/",e,{headers:{Authorization:`Bearer ${o}`}}).then(t=>{console.log(t.data.id_ticket),A.create({message:`Ticket ${t.data.id_ticket} creado exitosamente!`,type:"positive",actions:[{label:"Cerrar",color:"white"}]}),console.log(t)}).catch(t=>{A.create({message:t.response.data,type:"negative",actions:[{label:"Cerrar",color:"white"}]}),console.log("Error",t.response.data.message)}),this.getAllTickets()},async updateTicket(e,o){const t=H.getToken;console.log("updateticket actions:",e,o),await y.put(`tickets/update/${e}`,o,{headers:{Authorization:`Bearer ${t}`}}).then(s=>{A.create({message:`Cliente ${s.data.id_ticket} actualizado exitosamente!`,type:"positive",actions:[{label:"Cerrar",color:"white"}]}),console.log(s)}).catch(s=>{A.create({message:s.response.data.errors[0].message,type:"negative",actions:[{label:"Cerrar",color:"white"}]}),console.log("Error",s.response.data.message)}),this.getAllTickets()},async deleteTicket(e){const o=H.getToken;await y.delete(`tickets/delete/${e}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:t})=>{A.create({message:`Ticket ${t.id} eliminado exitosamente!`,type:"negative",caption:"Cuidado al eliminar!",progress:!0,actions:[{label:"Cerrar",color:"white"}]}),this.clientes=this.clientes.filter(s=>s.id_ticket!==e),console.log("deleteTicket ACTIONS: ",t)}).catch(t=>{console.log("deleteTicket ACTIONS: ",t.response.data.message),A.create({message:t.response.data.message,type:"negative",actions:[{label:"Cerrar",color:"white"}]}),console.log("Error",t.response.data.message)}),this.getAllTickets()}}}),qe=()=>{const e=Nt();return{getAllTickets:async()=>{await e.getAllTickets()},getTicketById:async n=>{await e.getTicketById(n)},createTicket:async n=>{console.log("createTicket ",n),await e.createTicket(n)},updateTicket:async(n,i)=>{console.log("updateTicket",n,i),await e.updateTicket(n,i)},deleteTicket:async n=>{console.log("deleteTicket useTicket: ",n),await e.deleteTicket(n)},getTickets:m(()=>e.getTickets),getTicket:m(()=>e.getTicket)}};const Ut=e=>(ft("data-v-e2817698"),e=e(),ht(),e),zt={style:{width:"700px","max-width":"80vw"}},Mt=Ut(()=>V("h4",{class:"text-center"},"Crear Ticket (OT)",-1)),jt={class:"row"},Ht={class:"col"},Kt=T(" No hay Clientes "),Lt={class:"row"},Ft={class:"col"},Wt=T(" No hay colaboradores "),Gt={class:"row"},Jt={class:"col"},Xt=T(" No hay dispositivos "),Yt={class:"row"},Zt={class:"col"},eo={class:"row justify-center"},to={__name:"FormTicket",setup(e){const{getAllClientes:o,getOnlyRuts:t}=Ie(),{getAllColaboradores:s,getOnlyRutCol:c}=Ee(),{getAllDispositivos:d,getOnlyIdDispositivos:n}=Pt(),{createTicket:i}=qe();Ve(async()=>{await u()}),Be(async()=>{await u()});const u=async()=>{await o(),await s(),await d()},b=t.value,_=w(null),D=c.value,x=w(null),B=w(null),I=n.value,S=w(null),O=w(1),q=async()=>{const C={clientesRutCliente:_.value,colaboradoresRutColaborador:x.value,dispositivosIdDispositivo:B.value,problema_ticket:S.value,estado_ticket:O.value};await i(C)};return(C,g)=>($e(),xe("div",zt,[l(Oe,{class:"q-pa-sm"},{default:r(()=>[Mt,l(xt,{onSubmit:q},{default:r(()=>[V("div",jt,[V("div",Ht,[l(ee,{modelValue:_.value,"onUpdate:modelValue":g[0]||(g[0]=a=>_.value=a),outlined:"","use-input":"","input-debounce":"0",label:"Elija un cliente",options:k(b),behavior:"menu",onFilter:C.filterFn},{"no-option":r(()=>[l(te,null,{default:r(()=>[l(oe,{class:"text-grey"},{default:r(()=>[Kt]),_:1})]),_:1})]),append:r(()=>[l(L,{name:"person",color:"black"})]),_:1},8,["modelValue","options","onFilter"])])]),V("div",Lt,[V("div",Ft,[l(ee,{modelValue:x.value,"onUpdate:modelValue":g[1]||(g[1]=a=>x.value=a),outlined:"","use-input":"","input-debounce":"0",label:"Colaborador que atiende",options:k(D),behavior:"menu"},{"no-option":r(()=>[l(te,null,{default:r(()=>[l(oe,{class:"text-grey"},{default:r(()=>[Wt]),_:1})]),_:1})]),append:r(()=>[l(L,{name:"support_agent",color:"black"})]),_:1},8,["modelValue","options"])])]),V("div",Gt,[V("div",Jt,[l(ee,{modelValue:B.value,"onUpdate:modelValue":g[2]||(g[2]=a=>B.value=a),outlined:"","use-input":"","input-debounce":"0",label:"Dispositivo a reparar",options:k(I),behavior:"menu"},{"no-option":r(()=>[l(te,null,{default:r(()=>[l(oe,{class:"text-grey"},{default:r(()=>[Xt]),_:1})]),_:1})]),append:r(()=>[l(L,{name:"devices_other",color:"black"})]),_:1},8,["modelValue","options"])])]),V("div",Yt,[V("div",Zt,[l(K,{modelValue:S.value,"onUpdate:modelValue":g[3]||(g[3]=a=>S.value=a),label:"Describa el problema... *",type:"textarea",outlined:""},null,8,["modelValue"])])]),V("div",eo,[l(P,{label:"Agregar",type:"submit",color:"primary"})])]),_:1})]),_:1})]))}};var oo=bt(to,[["__scopeId","data-v-e2817698"]]);const ao={class:"q-pa-md"},so={class:"q-ml-sm"},lo={class:"text-pre-wrap"},mo={__name:"TableEdit",setup(e){const{isAdmin:o}=Ot(),{getClienteByRut:t}=Ie(),{getAllColaboradores:s,getColabByRut:c}=Ee(),{getAllTickets:d,deleteTicket:n,getTickets:i}=qe();let u=w(!1),b=w(!1),_=w(null);const D=w(""),x=()=>{u.value=!u.value},B=C=>{_.value=C,b.value=!b.value},I=[{name:"id_ticket",align:"center",label:"ID Ticket",field:"ticket",sortable:!0},{name:"clientesRutCliente",align:"center",label:"Cliente",field:"clienteAtendido",sortable:!0},{name:"colaboradoresRutColaborador",align:"center",label:"Qui\xE9n Atendi\xF3",field:"colaboradorAtiende",sortable:!0},{name:"dispositivosIdDispositivo",align:"center",label:"Dispositivo",field:"dispositivoAtendido",sortable:!0},{name:"problema_ticket",align:"center",label:"Problema",field:"problemaTicket",sortable:!0},{name:"diagnostico_ticket",align:"center",label:"Dign\xF3stico",field:"diagnosticoTicket",sortable:!0},{name:"resolucion_ticket",align:"center",label:"Resoluci\xF3n",field:"resolucionTicket",sortable:!0},{name:"estado_ticket",align:"center",label:"Estado",field:"estadoTicket",sortable:!0},{name:"acciones",label:"Acciones",field:"acciones",align:"center"}],S=async C=>{o?(console.log("delete permitido",C),await n(C)):(console.log("no hay permisos"),Q("No tiene permisos de Administrador para eliminar","nevative"))},O=[{estado:"Abierto",color:"green"},{estado:"En Progreso",color:"yellow"},{estado:"Terminado",color:"blue"},{estado:"Cancelado",color:"red"}],q=async()=>{await d(),await s()};return Ve(async()=>{await q()}),Be(async()=>{await q()}),(C,g)=>($e(),xe("div",ao,[l($t,{title:"Administraci\xF3n de Tickets",rows:k(i),columns:I,filter:D.value,"row-key":"name","binary-state-sort":""},{top:r(()=>[l(he,{modelValue:k(u),"onUpdate:modelValue":g[0]||(g[0]=a=>ye(u)?u.value=a:u=a)},{default:r(()=>[l(oo)]),_:1},8,["modelValue"]),l(he,{modelValue:k(b),"onUpdate:modelValue":g[2]||(g[2]=a=>ye(b)?b.value=a:b=a),persistent:""},{default:r(()=>[l(Oe,{class:""},{default:r(()=>[l(yt,{class:"row items-center"},{default:r(()=>[l(kt,{icon:"warning",color:"warning","text-color":"white"}),V("span",so,"\xBFEst\xE1s seguro de eliminar el ticket n\xBA "+h(k(_))+"?",1)]),_:1}),l(wt,{align:"right"},{default:r(()=>[ke(l(P,{flat:"",label:"Cancelar",color:"primary"},null,512),[[Se]]),ke(l(P,{flat:"",label:"Confirmar",color:"negative",onClick:g[1]||(g[1]=a=>S(k(_)))},null,512),[[Se]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(P,{color:"primary",label:"A\xF1adir Ticket",icon:"add",onClick:x}),l(_t),l(K,{modelValue:D.value,"onUpdate:modelValue":g[3]||(g[3]=a=>D.value=a),borderless:"",outlined:"",dense:"",debounce:"300",color:"primary"},{append:r(()=>[l(L,{name:"search"})]),_:1},8,["modelValue"])]),body:r(a=>[l(qt,{props:a},{default:r(()=>[l(E,{key:"id_ticket",props:a},{default:r(()=>[T(h(a.row.id_ticket),1)]),_:2},1032,["props"]),l(E,{key:"clientesRutCliente",props:a},{default:r(()=>[T(h(a.row.clientesRutCliente)+" ",1),l(Ae,null,{default:r(()=>[T(h(k(t)(a.row.clientesRutCliente).nombre_cliente)+" "+h(k(t)(a.row.clientesRutCliente).appat_cliente)+" "+h(k(t)(a.row.clientesRutCliente).apmat_cliente),1)]),_:2},1024)]),_:2},1032,["props"]),l(E,{key:"colaboradoresRutColaborador",props:a},{default:r(()=>[V("div",lo,[T(h(a.row.colaboradoresRutColaborador)+" ",1),l(Ae,null,{default:r(()=>[T(h(k(c)(a.row.colaboradoresRutColaborador).nombre_colaborador)+" "+h(k(c)(a.row.colaboradoresRutColaborador).appat_colaborador)+" "+h(k(c)(a.row.colaboradoresRutColaborador).apmat_colaborador),1)]),_:2},1024)])]),_:2},1032,["props"]),l(E,{key:"dispositivosIdDispositivo",props:a},{default:r(()=>[T(h(a.row.dispositivosIdDispositivo),1)]),_:2},1032,["props"]),l(E,{key:"problema_ticket",props:a},{default:r(()=>[T(h(a.row.problema_ticket)+" ",1),l(ae,{modelValue:a.row.problema_ticket,"onUpdate:modelValue":v=>a.row.problema_ticket=v,title:"Editar problema","auto-save":""},{default:r(v=>[l(K,{modelValue:v.value,"onUpdate:modelValue":f=>v.value=f,dense:"",autofocus:"",counter:"",onKeyup:Z(v.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),l(E,{key:"diagnostico_ticket",props:a},{default:r(()=>[T(h(a.row.diagnostico_ticket)+" ",1),l(ae,{modelValue:a.row.diagnostico_ticket,"onUpdate:modelValue":v=>a.row.diagnostico_ticket=v,title:"Editar diagn\xF3stico","auto-save":""},{default:r(v=>[l(K,{modelValue:v.value,"onUpdate:modelValue":f=>v.value=f,dense:"",autofocus:"",counter:"",onKeyup:Z(v.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),l(E,{key:"resolucion_ticket",props:a},{default:r(()=>[T(h(a.row.resolucion_ticket)+" ",1),l(ae,{modelValue:a.row.resolucion_ticket,"onUpdate:modelValue":v=>a.row.resolucion_ticket=v,title:"Editar resoluci\xF3n","auto-save":""},{default:r(v=>[l(K,{modelValue:v.value,"onUpdate:modelValue":f=>v.value=f,dense:"",autofocus:"",counter:"",onKeyup:Z(v.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),l(E,{key:"estado_ticket",props:a},{default:r(()=>[l(Et,{color:O[a.row.estado_ticket-1].color},{default:r(()=>[T(h(O[a.row.estado_ticket-1].estado),1)]),_:2},1032,["color"])]),_:2},1032,["props"]),l(E,{key:"acciones",props:a},{default:r(()=>[l(P,{push:"",round:"",color:"red",onClick:v=>B(a.row.id_ticket)},{default:r(()=>[l(L,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]))}};export{mo as _};
