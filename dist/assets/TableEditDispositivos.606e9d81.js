import{a5 as Y,ca as Z,n as v,ap as H,ao as J,aA as W,Y as X,a4 as o,b3 as i,cj as N,z as s,j as D,ck as $,cl as ee,cm as oe,Z as U,G as m,cn as ae,b5 as k,bS as _,co as g,bR as I,a3 as p,bq as b,br as f}from"./index.6be16f63.js";import{Q as te,e as ie,f as u,g as V,h as A,i as le,C as Q}from"./ClosePopup.d0a73f30.js";import{c as se}from"./Notifications.d579e4b1.js";import{u as ne}from"./useAuth.5537e7f8.js";import{u as re}from"./useDispositivo.a5f8053d.js";import{u as de}from"./useMarcaDispositivo.3e52abc6.js";import{u as me}from"./useTipoDispositivo.739b29b4.js";import"./QItem.1a96ea91.js";const ue={class:"q-pa-md"},pe={class:"q-ml-sm"},ce={class:"text-pre-wrap"},Ne={__name:"TableEditDispositivos",setup(ve){const C=Y(()=>Z(()=>import("./FormDispositivo.f4387387.js"),["assets/FormDispositivo.f4387387.js","assets/FormDispositivo.57b4e940.css","assets/QItem.1a96ea91.js","assets/index.6be16f63.js","assets/index.d6902eec.css","assets/ClosePopup.d0a73f30.js","assets/QForm.99f3ffd3.js","assets/useMarcaDispositivo.3e52abc6.js","assets/Notifications.d579e4b1.js","assets/useTipoDispositivo.739b29b4.js","assets/useDispositivo.a5f8053d.js"])),{isAdmin:T}=ne(),{getAllMarcaDispositivos:M,getMDtoSelect:E}=de(),{getAllTipoDispositivos:j,getTDtoSelects:x}=me(),{getAllDispositivos:h,getDispositivos:B,deleteDispositivo:K,updateDispositivo:c}=re();let r=v(!1),d=v(!1),w=v(null);const S=v(""),O=()=>{r.value=!r.value},P=l=>{w.value=l,d.value=!d.value},q=[{name:"id_dispositivo",label:"ID",align:"center",field:"id_dispositivo",sortable:!0},{name:"num_serie_dispositivo",align:"center",label:"N\xFAmero de serie",field:"num_serie_dispositivo",sortable:!0},{name:"tipos.nombre_tipo",align:"center",label:"Tipo Dispositivo",field:"tipos.nombre_tipo",sortable:!0},{name:"marcas.nombre_marca",align:"center",label:"Marca Dispositivo",field:"marcas.nombre_marca",sortable:!0},{name:"modelo",align:"center",label:"Modelo Dispotivo",field:"modelo",sortable:!0},{name:"acciones",align:"center",label:"Acciones",field:"acciones",sortable:!0}],R=async(l,t)=>{const e={num_serie_dispositivo:t};console.log("editarItemNumSerie",l,e),await c(l,e)},z=async(l,t)=>{const e={tiposDispositivosIdTipos:t};console.log("editarItemTipo",l,e),await c(l,e)},F=async(l,t)=>{const e={marcasDispositivosIdMarcas:t};console.log("editarItemMarca",l,e),await c(l,e)},G=async(l,t)=>{const e={modelo:t};console.log("editarItemModelo",l,e),await c(l,e)},L=async l=>{T?(console.log("delete permitido",l),await K(l)):(console.log("no hay permisos"),se("No tiene permisos de Administrador para eliminar","negative"))},y=async()=>{await h(),await M(),await j()};return H(async()=>{await y()}),J(async()=>{await y()}),(l,t)=>(W(),X("div",ue,[o(le,{title:"Administraci\xF3n de Dispositivos",rows:s(B),columns:q,filter:S.value,"row-key":"name","binary-state-sort":""},{top:i(()=>[o(N,{modelValue:s(r),"onUpdate:modelValue":t[0]||(t[0]=e=>D(r)?r.value=e:r=e)},{default:i(()=>[o(s(C))]),_:1},8,["modelValue"]),o(N,{modelValue:s(d),"onUpdate:modelValue":t[2]||(t[2]=e=>D(d)?d.value=e:d=e),persistent:""},{default:i(()=>[o($,{class:""},{default:i(()=>[o(ee,{class:"row items-center"},{default:i(()=>[o(oe,{icon:"warning",color:"warning","text-color":"white"}),U("span",pe,"\xBFEst\xE1s seguro de eliminar el dispositivo con ID "+m(s(w))+" ?",1)]),_:1}),o(ae,{align:"right"},{default:i(()=>[k(o(_,{flat:"",label:"Cancelar",color:"primary"},null,512),[[Q]]),k(o(_,{flat:"",label:"Confirmar",color:"negative",onClick:t[1]||(t[1]=e=>L(s(w)))},null,512),[[Q]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(_,{color:"primary",label:"A\xF1adir nuevo dispositivo",icon:"add",onClick:O}),o(te),o(g,{modelValue:S.value,"onUpdate:modelValue":t[3]||(t[3]=e=>S.value=e),outlined:"",dense:"",debounce:"300",color:"primary"},{append:i(()=>[o(I,{name:"search"})]),_:1},8,["modelValue"])]),body:i(e=>[o(ie,{props:e},{default:i(()=>[o(u,{key:"id_dispositivo",props:e},{default:i(()=>[p(m(e.row.id_dispositivo),1)]),_:2},1032,["props"]),o(u,{key:"num_serie_dispositivo",props:e},{default:i(()=>[p(m(e.row.num_serie_dispositivo)+" ",1),o(V,{modelValue:e.row.num_serie_dispositivo,"onUpdate:modelValue":a=>e.row.num_serie_dispositivo=a,title:"Editar n\xFAmero de serie",buttons:"",persistent:"",onSave:a=>R(e.row.id_dispositivo,a)},{default:i(a=>[o(g,{modelValue:a.value,"onUpdate:modelValue":n=>a.value=n,autofocus:"",counter:"",mask:"NNNNNNNNNNNNNNNNNNNNNN","unmasked-value":"",onKeyup:t[4]||(t[4]=b(f(()=>{},["stop"]),["enter"]))},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),o(u,{key:"tipos.nombre_tipo",props:e},{default:i(()=>[p(m(e.row.tipos.nombre_tipo)+" ",1),o(V,{modelValue:e.row.tipos.nombre_tipo,"onUpdate:modelValue":a=>e.row.tipos.nombre_tipo=a,title:"Editar tipo dispositivo",buttons:"",persistent:"",onSave:a=>z(e.row.id_dispositivo,a)},{default:i(a=>[o(A,{modelValue:a.value,"onUpdate:modelValue":n=>a.value=n,"label-color":"primary",outlined:"","input-debounce":"0",label:"Tipo Dispositivo ","map-options":"","emit-value":"",behavior:"menu",options:s(x),onKeyup:t[5]||(t[5]=b(f(()=>{},["stop"]),["enter"]))},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),o(u,{key:"marcas.nombre_marca",props:e},{default:i(()=>[p(m(e.row.marcas.nombre_marca)+" ",1),o(V,{modelValue:e.row.marcas.nombre_marca,"onUpdate:modelValue":a=>e.row.marcas.nombre_marca=a,title:"Editar marca",buttons:"",persistent:"",onSave:a=>F(e.row.id_dispositivo,a)},{default:i(a=>[o(A,{modelValue:a.value,"onUpdate:modelValue":n=>a.value=n,color:"grey-3","label-color":"primary",outlined:"","input-debounce":"0",label:"Marca Dispositivo ",behavior:"menu","map-options":"","emit-value":"",options:s(E),onKeyup:t[6]||(t[6]=b(f(()=>{},["stop"]),["enter"]))},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),o(u,{key:"modelo",props:e},{default:i(()=>[U("div",ce,[p(m(e.row.modelo)+" ",1),o(V,{modelValue:e.row.modelo,"onUpdate:modelValue":a=>e.row.modelo=a,title:"Editar modelo",buttons:"",persistent:"",onSave:a=>G(e.row.id_dispositivo,a)},{default:i(a=>[o(g,{modelValue:a.value,"onUpdate:modelValue":n=>a.value=n,autofocus:"",counter:"",mask:"SSSSSSSSSSSSSSSSSSSS","unmasked-value":"",onKeyup:t[7]||(t[7]=b(f(()=>{},["stop"]),["enter"]))},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])])]),_:2},1032,["props"]),o(u,{key:"acciones",props:e},{default:i(()=>[o(_,{push:"",round:"",color:"red",onClick:a=>P(e.row.id_dispositivo)},{default:i(()=>[o(I,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]))}};export{Ne as default};
