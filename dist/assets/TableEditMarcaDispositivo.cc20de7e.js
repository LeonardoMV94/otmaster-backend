import{a5 as x,ca as B,n as c,ap as P,ao as j,aA as q,Y as R,a4 as e,b3 as o,cj as b,z as n,j as v,ck as K,cl as O,cm as z,Z as F,G as p,cn as G,b5 as N,bS as m,co as w,bR as g,a3 as V,bq as L,br as Y}from"./index.6afc27b2.js";import{Q as Z,e as H,f,g as J,i as W,C as y}from"./ClosePopup.93d4e85d.js";import{c as X}from"./Notifications.3fd28b16.js";import{u as $}from"./useAuth.7d03f9b7.js";import{u as aa}from"./useMarcaDispositivo.b0196256.js";import"./QItem.a3d8980f.js";const ea={class:"q-pa-md"},oa={class:"q-ml-sm"},ma={__name:"TableEditMarcaDispositivo",setup(ta){const C=x(()=>B(()=>import("./FormMarcaDispositivo.e80dfeac.js"),["assets/FormMarcaDispositivo.e80dfeac.js","assets/FormMarcaDispositivo.418b66c6.css","assets/index.6afc27b2.js","assets/index.d6902eec.css","assets/QForm.987b0ae1.js","assets/useMarcaDispositivo.b0196256.js","assets/Notifications.3fd28b16.js"])),{isAdmin:D}=$(),{getAllMarcaDispositivos:Q,getMarcasDispositivos:k,updateMarcaDispositivo:A,deleteMarcaDispositivo:M}=aa();let s=c(!1),i=c(!1),d=c(null);const u=c(""),I=()=>{s.value=!s.value},h=l=>{d.value=l,i.value=!i.value},E=[{name:"id_marca",label:"ID Marca",align:"center",field:"id_marca",sortable:!0},{name:"nombre_marca",align:"center",label:"Nombre de la marca",field:"nombre_marca",sortable:!0},{name:"acciones",align:"center",label:"Acciones",field:"acciones",sortable:!0}],S=async(l,t)=>{const a={nombre_marca:t};console.log("editarItemNombremarca",l,a),await A(l,a)},U=async l=>{D?(console.log("delete permitido",l),await M(l)):(console.log("no hay permisos"),X("No tiene permisos de Administrador para eliminar","negative"))},_=async()=>{await Q()};return P(async()=>{await _()}),j(async()=>{await _()}),(l,t)=>(q(),R("div",ea,[e(W,{title:"Administraci\xF3n de Marcas de Dispositivos",rows:n(k),columns:E,filter:u.value,"row-key":"name","binary-state-sort":""},{top:o(()=>[e(b,{modelValue:n(s),"onUpdate:modelValue":t[0]||(t[0]=a=>v(s)?s.value=a:s=a)},{default:o(()=>[e(n(C))]),_:1},8,["modelValue"]),e(b,{modelValue:n(i),"onUpdate:modelValue":t[2]||(t[2]=a=>v(i)?i.value=a:i=a),persistent:""},{default:o(()=>[e(K,{class:""},{default:o(()=>[e(O,{class:"row items-center"},{default:o(()=>[e(z,{icon:"warning",color:"warning","text-color":"white"}),F("span",oa,"\xBFEst\xE1s seguro de eliminar la marca con ID "+p(n(d))+" ?",1)]),_:1}),e(G,{align:"right"},{default:o(()=>[N(e(m,{flat:"",label:"Cancelar",color:"primary"},null,512),[[y]]),N(e(m,{flat:"",label:"Confirmar",color:"negative",onClick:t[1]||(t[1]=a=>U(n(d)))},null,512),[[y]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(m,{color:"primary",label:"A\xF1adir nueva marca dispositivo",icon:"add",onClick:I}),e(Z),e(w,{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=a=>u.value=a),outlined:"",dense:"",debounce:"300",color:"primary"},{append:o(()=>[e(g,{name:"search"})]),_:1},8,["modelValue"])]),body:o(a=>[e(H,{props:a},{default:o(()=>[e(f,{key:"id_marca",props:a},{default:o(()=>[V(p(a.row.id_marca),1)]),_:2},1032,["props"]),e(f,{key:"nombre_marca",props:a},{default:o(()=>[V(p(a.row.nombre_marca)+" ",1),e(J,{modelValue:a.row.nombre_marca,"onUpdate:modelValue":r=>a.row.nombre_marca=r,title:"Editar nombre de marca",buttons:"",persistent:"",onSave:r=>S(a.row.id_marca,r)},{default:o(r=>[e(w,{modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,autofocus:"",counter:"",clearable:"",mask:"NNNNNNNNNNNNNNNNNNNNNN","unmasked-value":"",onKeyup:t[4]||(t[4]=L(Y(()=>{},["stop"]),["enter"]))},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),e(f,{key:"acciones",props:a},{default:o(()=>[e(m,{push:"",round:"",color:"red",onClick:r=>h(a.row.id_marca)},{default:o(()=>[e(g,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]))}};export{ma as default};
