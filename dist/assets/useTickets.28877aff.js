var T=Object.defineProperty,p=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;var d=(t,e,s)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,r=(t,e)=>{for(var s in e||(e={}))A.call(e,s)&&d(t,s,e[s]);if(k)for(var s of k(e))m.call(e,s)&&d(t,s,e[s]);return t},u=(t,e)=>p(t,h(e));import{c8 as y,cb as w,cc as c,V as l}from"./index.efe594f0.js";import{c as i}from"./Notifications.fda502fa.js";const n=y(),$=w("tickets",{state:()=>({tickets:[],ticket:{},estados:[],countRepuestos:[]}),getters:{getTickets:t=>t.tickets,getTicket:t=>t.ticket,getEstados:t=>t.estados,getEstadosSelect:t=>t.estados.map(e=>u(r({},e),{label:e.tipo,value:e.id})),getCountRepuestoss:t=>t.countRepuestos},actions:{async getAllTickets(){const t=n.getToken;if(t=="")return this.tickets;const{data:e}=await c.get("/tickets",{headers:{Authorization:`Bearer ${t}`}});console.log("getAllTickets ACTIONS: ",e),this.tickets=e},async getTicketById(t){const e=n.getToken,{data:s}=await c.get(`/tickets/${t}`,{headers:{Authorization:`Bearer ${e}`}});console.log(s),this.cliente=s},async getCountRepuestos(){const t=await n.getToken,{data:e}=await c.get("tickets/countrepuestos/",{headers:{Authorization:`Bearer ${t}`}});console.log("getCountRepuestos: ",e),this.countRepuestos=e},async getEstadosTickets(){const t=await n.getToken,{data:e}=await c.get("tickets/estados/",{headers:{Authorization:`Bearer ${t}`}});console.log("getEstados: ",e),this.estados=e},async createMultiplesItems(t,e){const s=await n.getToken;await c.post(`/tickets/add-multiple-items/${t}`,e,{headers:{Authorization:`Bearer ${s}`}}).then(o=>{console.log(o.data),i(`Repuestos de ticket ${t} actualizados exitosamente!`,"positive"),console.log(o)}).catch(o=>{i(o.response.data,"negative"),console.log("Error",o.response.data.message)}),this.getAllTickets()},async createTicket(t){const e=await n.getToken;await c.post("/tickets/add/",t,{headers:{Authorization:`Bearer ${e}`}}).then(s=>{console.log(s.data.id_ticket),i(`Ticket ${s.data.id_ticket} creado exitosamente!`,"positive"),console.log(s)}).catch(s=>{i(s.response.data,"negative"),console.log("Error",s.response.data.message)}),this.getAllTickets()},async updateTicket(t,e){const s=n.getToken;console.log("updateticket actions:",t,e),await c.patch(`tickets/update/${t}`,e,{headers:{Authorization:`Bearer ${s}`}}).then(o=>{i(`Ticket ${o.data.id_ticket} actualizado exitosamente!`,"positive"),console.log(o)}).catch(o=>{i(o.response.data.errors[0].message,"negative"),console.log("Error",o.response.data.message)}),this.getAllTickets()},async deleteTicket(t){const e=n.getToken;await c.delete(`tickets/delete/${t}`,{headers:{Authorization:`Bearer ${e}`}}).then(({data:s})=>{i(`Ticket ${s.id} eliminado exitosamente!`,"negative"),console.log("antes ",this.tickets),this.tickets=this.tickets.filter(o=>o.id_ticket!==t),console.log("despues",this.tickets),console.log("deleteTicket ACTIONS: ",s)}).catch(s=>{console.log("deleteTicket ACTIONS: ",s.response.data.message),i(s.response.data.message,"negative"),console.log("Error",s.response.data.message)})}}}),f=()=>{const t=$();return{getAllTickets:async()=>{await t.getAllTickets()},getTicketById:async a=>{await t.getTicketById(a)},createTicket:async a=>{console.log("createTicket ",a),await t.createTicket(a)},updateTicket:async(a,g)=>{console.log("updateTicket",a,g),await t.updateTicket(a,g)},deleteTicket:async a=>{console.log("deleteTicket useTicket: ",a),await t.deleteTicket(a)},getAllEstados:async()=>{await t.getEstadosTickets()},getAllCountRepuestos:async()=>{await t.getCountRepuestos()},createMultipleitems:async(a,g)=>{await t.createMultiplesItems(a,g)},getTickets:l(()=>t.getTickets),getTicket:l(()=>t.getTicket),getEstadosTicket:l(()=>t.getEstados),getCountAllRepuestos:l(()=>t.getCountRepuestoss),getEstadosSelects:l(()=>t.getEstadosSelect)}};export{f as u};
