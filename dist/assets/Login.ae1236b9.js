import{_ as b,r as g,J as _,K as h,V as v,Y as u,N as r,M as i,a$ as y,b3 as w,a_ as d,Q as m,b4 as V,U as k}from"./index.037a1abe.js";import{Q as C}from"./QForm.79ccbd99.js";import{u as Q}from"./use-quasar.79e08083.js";import{u as x}from"./useAuth.01cb421f.js";function c(e){return typeof e=="string"?e.replace(/^0+|[^0-9kK]+/g,"").toUpperCase():""}function q(e){if(typeof e!="string"||/^0+/.test(e)||!/^0*(\d{1,3}(\.?\d{3})*)-?([\dkK])$/.test(e))return!1;e=c(e);let s=parseInt(e.slice(0,-1),10),a=0,o=1;for(;s>0;)o=(o+s%10*(9-a++%6))%11,s=Math.floor(s/10);return(o>0?""+(o-1):"K")===e.slice(-1)}function F(e,s={dots:!0}){e=c(e);let a;if(s.dots){a=e.slice(-4,-1)+"-"+e.substr(e.length-1);for(let o=4;o<e.length;o+=3)a=e.slice(-3-o,-o)+"."+a}else a=e.slice(0,-1)+"-"+e.substr(e.length-1);return a}function N(e){const s=Array.from(c(e),Number);if(s.length===0||s.includes(NaN))throw new Error(`"${e}" as RUT is invalid`);const a=11,o=0,l=s.reverse().reduce((t,f,p)=>t+f*(p%6+2),o),n=a-l%a;return n===10?"K":n===11?"0":n.toString()}var R={validate:q,clean:c,format:F,getCheckDigit:N};const U={name:"LoginPage",setup(){const e=g({rut_colaborador:"",password_colaborador:""}),s=_(),{loginUser:a}=x(),o=Q();return{userForm:e,onSubmit:async()=>{const{ok:l,message:n}=await a(e.value);l?(o.notify({type:"positive",message:n}),s.push({name:"home"})):o.notify({type:"negative",message:n})},isValidRut:l=>R.validate(l)||"Rut no valido"}}},E={class:"column col-md-4 col-sm-6"},K=u("div",{class:"row justify-center"},[u("h5",{class:"text-h4 text-white q-my-md"},"Iniciar Sesi\xF3n")],-1),S={class:"col-6"};function B(e,s,a,o,l,n){return h(),v("div",E,[K,u("div",S,[r(y,{square:"",bordered:"",class:"q-pa-xl shadow-1"},{default:i(()=>[r(w,null,{default:i(()=>[r(C,{class:""},{default:i(()=>[r(d,{modelValue:o.userForm.rut_colaborador,"onUpdate:modelValue":s[0]||(s[0]=t=>o.userForm.rut_colaborador=t),square:"",outlined:"",clearable:"",type:"text",label:"Rut Colaborador","lazy-rules":"",rules:[t=>t.length>0||"Este campo es obligatorio"]},{before:i(()=>[r(m,{name:"person"})]),_:1},8,["modelValue","rules"]),r(d,{modelValue:o.userForm.password_colaborador,"onUpdate:modelValue":s[1]||(s[1]=t=>o.userForm.password_colaborador=t),square:"",outlined:"",clearable:"",type:"password",label:"Contrase\xF1a","lazy-rules":"",rules:[t=>t.length>0||"Este campo es obligatorio",t=>t.length>7||"Debe tener como minimo 8 car\xE1cteres"]},{before:i(()=>[r(m,{name:"key"})]),_:1},8,["modelValue","rules"])]),_:1})]),_:1}),r(V,{class:"q-px-md"},{default:i(()=>[r(k,{unelevated:"",color:"light-blue-7",size:"lg",class:"full-width",label:"Entrar",onClick:o.onSubmit},null,8,["onClick"])]),_:1})]),_:1})])])}var $=b(U,[["render",B]]);export{$ as default};
