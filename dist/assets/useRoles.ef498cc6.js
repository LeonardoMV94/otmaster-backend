var u=Object.defineProperty,p=Object.defineProperties;var m=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var R=(e,o,t)=>o in e?u(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,d=(e,o)=>{for(var t in o||(o={}))A.call(o,t)&&R(e,t,o[t]);if(g)for(var t of g(o))y.call(o,t)&&R(e,t,o[t]);return e},h=(e,o)=>p(e,m(o));import{c8 as w,cb as $,cc as n,V as c}from"./index.a4b71a83.js";import{c as l}from"./Notifications.91e332ad.js";const r=w(),k=$("roles",{state:()=>({roles:[],rol:{}}),getters:{getRoles:e=>e.roles,getRol:e=>e.rol,getRolesSelect:e=>e.roles.map(o=>h(d({},o),{label:o.nombre_rol,value:o.id_rol}))},actions:{async getAllRoles(){const e=await r.getToken;if(e=="")return this.Roles;const{data:o}=await n.get("/roles",{headers:{Authorization:`Bearer ${e}`}});console.log("getAllRoles ACTIONS: ",o),this.roles=o},async getRolById(e){const o=await r.getToken,{data:t}=await n.get(`/roles/${e}`,{headers:{Authorization:`Bearer ${o}`}});console.log(t),this.rol=t},async createRol(e){const o=r.getToken;await n.post("/roles/add/",e,{headers:{Authorization:`Bearer ${o}`}}).then(t=>{l(`Rol ${t.data.id_rol} creado exitosamente!`,"positive"),console.log(t)}).catch(t=>{l(t.response.data.errors[0].message,"negative"),console.log("Error",t.response.data.message)}),this.getAllRoles()},async updateRol(e,o){const t=await r.getToken;console.log("updateRol actions:",e,o),await n.patch(`roles/${e}`,o,{headers:{Authorization:`Bearer ${t}`}}).then(a=>{l(`Rol ${a.data.id_rol} actualizado exitosamente!`,"positive"),console.log(a)}).catch(a=>{l(a.response.data.errors[0].message,"negative"),console.log("Error",a.response.data.message)}),this.getAllRoles()},async deleteRol(e){const o=await r.getToken;if(e==1){l("Rol administrador no se puede eliminar !!","negative");return}await n.delete(`roles/delete/${e}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:t})=>{l(`Rol ${t} eliminado exitosamente!`,"positive"),this.roles=this.roles.filter(a=>a.id_rol!==e),console.log("deleteRol ACTIONS: ",t)}).catch(t=>{console.log("deleteRol ACTIONS: ",t.response.data.message),l(t.response.data.message,"negative"),console.log("Error",t.response.data.message)}),this.getAllRoles()}}}),I=()=>{const e=k();return{getAllRoles:async()=>{await e.getAllRoles()},getRolById:async s=>{await e.getRolById(s)},createRol:async s=>{console.log("createRol ",s),await e.createRol(s)},updateRol:async(s,i)=>{console.log("updateRol",s,i),await e.updateRol(s,i)},deleteRol:async s=>{console.log("deleteRol useRol: ",s),await e.deleteRol(s)},getRoles:c(()=>e.getRoles),getRol:c(()=>e.getRol),getRolestoSelect:c(()=>e.getRolesSelect)}};export{I as u};
